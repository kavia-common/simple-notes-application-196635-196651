{"is_source_file": true, "format": "Python", "description": "This file implements a RESTful API backend for a simple notes application using FastAPI and SQLite. It includes endpoints for CRUD operations on notes, database initialization, and health checks. The code defines data models, database interaction functions, and API route handlers, and is configured to be consumed by a React frontend.", "external_files": ["os", "sqlite3", "datetime", "fastapi", "pydantic"], "external_methods": ["FastAPI()", "HTTPException()", "CORSMiddleware()", "BaseModel()", "Field()", "_utc_now_iso()", "_get_conn()", "_init_db()", "_row_to_note()"], "published": ["list_notes", "create_note", "get_note", "update_note", "delete_note", "health_check", "docs_help"], "classes": [{"name": "Note", "description": "A persisted note with id, title, content, created_at, and updated_at timestamps."}, {"name": "NoteCreate", "description": "Payload model for creating a new note with title and content."}, {"name": "NoteUpdate", "description": "Payload model for updating a note with new title and content."}], "methods": [{"name": "str _utc_now_iso()", "description": "Returns current UTC time as ISO-8601 string.", "scope": "", "scopeKind": ""}, {"name": "Generator[sqlite3.Connection,None,None] _get_conn()", "description": "Context manager providing a SQLite connection with proper transaction handling.", "scope": "", "scopeKind": ""}, {"name": "None _init_db()", "description": "Initializes the database schema by creating the notes table if it does not exist.", "scope": "", "scopeKind": ""}, {"name": "Note _row_to_note(row: sqlite3.Row)", "description": "Converts a SQLite row into a Note model instance.", "scope": "", "scopeKind": ""}, {"name": "None _startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Note create_note(payload: NoteCreate)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_note(note_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "docs_help()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Note get_note(note_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[Note] list_notes()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Note update_note(note_id: int, payload: NoteUpdate)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["list_notes", "create_note", "get_note", "update_note", "delete_note", "_utc_now_iso", "_get_conn", "_init_db", "_row_to_note"], "search-terms": ["FastAPI", "Notes", "SQLite", "CRUD", "database", "health", "API endpoints", "CORS", "notes backend"], "state": 2, "file_id": 2, "knowledge_revision": 10, "git_revision": "2bbccc486d8d88f2c0acc8a5a89bb243a76043c6", "revision_history": [{"7": "2bbccc486d8d88f2c0acc8a5a89bb243a76043c6"}, {"10": "2bbccc486d8d88f2c0acc8a5a89bb243a76043c6"}], "ctags": [{"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^class Note(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteCreate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^class NoteCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NoteUpdate", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^class NoteUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_DB_PATH", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^_DB_PATH = os.path.abspath($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_get_conn", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def _get_conn() -> Generator[sqlite3.Connection, None, None]:$/", "language": "Python", "typeref": "typename:Generator[sqlite3.Connection,None,None]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_init_db", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def _init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_row_to_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def _row_to_note(row: sqlite3.Row) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(row: sqlite3.Row)"}, {"_type": "tag", "name": "_startup", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def _startup() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_utc_now_iso", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def _utc_now_iso() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Note content\\/body.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Note content\\/body.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    content: str = Field(..., description=\"Updated content\\/body.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "create_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def create_note(payload: NoteCreate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(payload: NoteCreate)"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    created_at: str = Field(..., description=\"ISO-8601 timestamp when created (UTC).\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "delete_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def delete_note(note_id: int):$/", "language": "Python", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "docs_help", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def docs_help():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def get_note(note_id: int) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(note_id: int)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique note identifier.\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "list_notes", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def list_notes() -> List[Note]:$/", "language": "Python", "typeref": "typename:List[Note]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Note title.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=200, description=\"Note title.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteCreate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., min_length=1, max_length=200, description=\"Updated title.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "NoteUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "update_note", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^def update_note(note_id: int, payload: NoteUpdate) -> Note:$/", "language": "Python", "typeref": "typename:Note", "kind": "function", "signature": "(note_id: int, payload: NoteUpdate)"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/simple-notes-application-196635-196651/notes_backend/src/api/main.py", "pattern": "/^    updated_at: str = Field(..., description=\"ISO-8601 timestamp when last updated (UTC).\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Note", "scopeKind": "class"}], "hash": "eced86cbd02f9dc5f74226d6dba710e4", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/api/main.py", "fields": [{"name": "_DB_PATH = os.path.abspath(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str content", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "str created_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str title", "scope": "Note", "scopeKind": "class", "description": "unavailable"}, {"name": "str updated_at", "scope": "Note", "scopeKind": "class", "description": "unavailable"}]}